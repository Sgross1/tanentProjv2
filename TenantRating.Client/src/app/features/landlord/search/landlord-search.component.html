<div class="search-container fadeIn">
    <header class="search-header">
        <h1>×—×™×¤×•×© ×©×•×›×¨×™×</h1>
        <p>××¦× ××ª ×”×“×™×™×¨ ×”××•×©×œ× ×¢×‘×•×¨×š</p>
    </header>

    <div class="search-box">
        <div class="input-group">
            <span class="icon">ğŸ”</span>
            <input type="text" [(ngModel)]="searchCity" (input)="onSearchInput()" (keyup.enter)="onSearch()"
                placeholder="×—×¤×© ×œ×¤×™ ×¢×™×¨ (×œ××©×œ: ×ª×œ ××‘×™×‘)">

            <div class="autocomplete-dropdown" *ngIf="filteredCities.length > 0">
                <div class="item" *ngFor="let city of filteredCities" (click)="selectCity(city)">
                    {{city}}
                </div>
            </div>
        </div>

        <div class="filters">
            <input type="number" [(ngModel)]="minRent" placeholder="×©×›×¨ ×“×™×¨×” ××™× ×™××œ×™">
            <span>-</span>
            <input type="number" [(ngModel)]="maxRent" placeholder="×©×›×¨ ×“×™×¨×” ××§×¡×™××œ×™">
        </div>

        <button class="search-btn" (click)="onSearch()">
            ×—×¤×©
        </button>
    </div>

    <div class="loading" *ngIf="isLoading">
        <div class="spinner"></div>
        ××—×¤×© ×“×™×™×¨×™× ××ª××™××™×...
    </div>

    <div class="results-grid" *ngIf="!isLoading && results.length > 0">
        <div class="tenant-card" *ngFor="let tenant of results">
            <button class="save-btn" [class.active]="savedMap[tenant.requestId]" (click)="toggleSave(tenant)">
                {{ savedMap[tenant.requestId] ? 'â¤ï¸' : 'ğŸ¤' }}
            </button>
            <div class="score-badge" [style.color]="getScoreColor(tenant.finalScore)">
                <span class="label">×¦×™×•×Ÿ:</span>
                {{tenant.finalScore | number:'1.0-1'}}
            </div>
            <h3>{{tenant.tenantName}}</h3>
            <div class="details">
                <p>ğŸ“ {{tenant.cityName}}</p>
                <p>ğŸ’° {{tenant.desiredRent}} â‚ª</p>
                <p class="date">ğŸ“… {{tenant.dateOfRating | date:'dd/MM/yyyy'}}</p>
            </div>

            <button class="contact-btn" (click)="togglePhone(tenant)" *ngIf="!showPhoneMap[tenant.requestId]">
                ğŸ“ ×”×¦×’ ×˜×œ×¤×•×Ÿ
            </button>
            <div class="phone-display" *ngIf="showPhoneMap[tenant.requestId]">
                {{ tenant.phoneNumber || '×œ× ×”×•×–×Ÿ ×˜×œ×¤×•×Ÿ' }}
            </div>
        </div>
    </div>

    <div class="no-results" *ngIf="hasSearched && !isLoading && results.length === 0">
        <div class="icon">ğŸ•µï¸</div>
        <h3>×œ× × ××¦××• ×ª×•×¦××•×ª</h3>
        <p>× ×¡×” ×œ×©× ×•×ª ××ª ×¤×¨××˜×¨×™ ×”×—×™×¤×•×©</p>
    </div>

    <!-- Quick Suggestions for Demo if empty -->
    <div class="suggestions-list" *ngIf="!hasSearched">
        <p>×¢×¨×™× ×¤×•×¤×•×œ×¨×™×•×ª:</p>
        <div class="tags">
            <span (click)="searchCity='×ª×œ ××‘×™×‘'; onSearch()">×ª×œ ××‘×™×‘ - ×™×¤×•</span>
            <span (click)="searchCity='×¨××ª ×’×Ÿ'; onSearch()">×¨××ª ×’×Ÿ</span>
            <span (click)="searchCity='×’×‘×¢×ª×™×™×'; onSearch()">×’×‘×¢×ª×™×™×</span>
        </div>
    </div>
</div>